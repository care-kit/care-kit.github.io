{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/lukanetzler/Desktop/Care%20Kit/src/hooks/useIsAdmin.ts"],"sourcesContent":["import { useAuth } from '@/context/AuthContext';\n\nexport function useIsAdmin(): boolean {\n  const { user } = useAuth();\n  return user?.role === 'admin';\n}\n"],"names":[],"mappings":";;;AAAA;;;AAEO,SAAS;;IACd,MAAM,EAAE,IAAI,EAAE,GAAG,CAAA,GAAA,iIAAA,CAAA,UAAO,AAAD;IACvB,OAAO,MAAM,SAAS;AACxB;GAHgB;;QACG,iIAAA,CAAA,UAAO","debugId":null}},
    {"offset": {"line": 32, "column": 0}, "map": {"version":3,"sources":["file:///Users/lukanetzler/Desktop/Care%20Kit/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,CAAA,GAAA,mKAAA,CAAA,MAAG,AAAD,EACvB,4VACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAC5B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,mKAAA,CAAA,OAAI,GAAG;IAC9B,qBACE,6LAAC;QACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,OAAO,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 99, "column": 0}, "map": {"version":3,"sources":["file:///Users/lukanetzler/Desktop/Care%20Kit/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAG1B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,4DACA;QAED,GAAG,KAAK;;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,sDACA;QAED,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGrC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,QAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QAAI,KAAK;QAAK,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,YAAY;QAAa,GAAG,KAAK;;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,SAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 202, "column": 0}, "map": {"version":3,"sources":["file:///Users/lukanetzler/Desktop/Care%20Kit/src/components/stress-rating.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from '@/components/ui/card';\nimport { cn } from '@/lib/utils';\nimport { useToast } from '@/hooks/use-toast';\n\ninterface StressRatingProps {\n  title: string;\n  description: string;\n  onSubmit: (rating: number) => void;\n}\n\nexport default function StressRating({ title, description, onSubmit }: StressRatingProps) {\n  const [selectedRating, setSelectedRating] = useState<number | null>(null);\n  const { toast } = useToast();\n\n  const handleSubmit = () => {\n    if (selectedRating === null) {\n      toast({\n        title: \"Selection required\",\n        description: \"Please select a stress level before submitting.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n    onSubmit(selectedRating);\n  };\n\n  return (\n    <Card className=\"shadow-lg animate-in fade-in-50 duration-500\">\n      <CardHeader>\n        <CardTitle className=\"font-headline text-center\">{title}</CardTitle>\n        <CardDescription className=\"text-center\">\n          {description}\n        </CardDescription>\n      </CardHeader>\n      <CardContent>\n        <div className=\"flex justify-center gap-2 md:gap-4\">\n          {[1, 2, 3, 4, 5].map((rating) => (\n            <Button\n              key={rating}\n              variant=\"outline\"\n              size=\"icon\"\n              className={cn(\n                'h-12 w-12 rounded-full text-lg font-bold transition-all duration-200',\n                selectedRating === rating ? 'bg-accent text-accent-foreground scale-110' : 'bg-background'\n              )}\n              onClick={() => setSelectedRating(rating)}\n            >\n              {rating}\n            </Button>\n          ))}\n        </div>\n      </CardContent>\n      <CardFooter>\n        <Button className=\"w-full\" onClick={handleSubmit}>\n          Submit\n        </Button>\n      </CardFooter>\n    </Card>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;;;AANA;;;;;;AAce,SAAS,aAAa,EAAE,KAAK,EAAE,WAAW,EAAE,QAAQ,EAAqB;;IACtF,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAiB;IACpE,MAAM,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,+HAAA,CAAA,WAAQ,AAAD;IAEzB,MAAM,eAAe;QACnB,IAAI,mBAAmB,MAAM;YAC3B,MAAM;gBACJ,OAAO;gBACP,aAAa;gBACb,SAAS;YACX;YACA;QACF;QACA,SAAS;IACX;IAEA,qBACE,6LAAC,mIAAA,CAAA,OAAI;QAAC,WAAU;;0BACd,6LAAC,mIAAA,CAAA,aAAU;;kCACT,6LAAC,mIAAA,CAAA,YAAS;wBAAC,WAAU;kCAA6B;;;;;;kCAClD,6LAAC,mIAAA,CAAA,kBAAe;wBAAC,WAAU;kCACxB;;;;;;;;;;;;0BAGL,6LAAC,mIAAA,CAAA,cAAW;0BACV,cAAA,6LAAC;oBAAI,WAAU;8BACZ;wBAAC;wBAAG;wBAAG;wBAAG;wBAAG;qBAAE,CAAC,GAAG,CAAC,CAAC,uBACpB,6LAAC,qIAAA,CAAA,SAAM;4BAEL,SAAQ;4BACR,MAAK;4BACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,wEACA,mBAAmB,SAAS,+CAA+C;4BAE7E,SAAS,IAAM,kBAAkB;sCAEhC;2BATI;;;;;;;;;;;;;;;0BAcb,6LAAC,mIAAA,CAAA,aAAU;0BACT,cAAA,6LAAC,qIAAA,CAAA,SAAM;oBAAC,WAAU;oBAAS,SAAS;8BAAc;;;;;;;;;;;;;;;;;AAM1D;GAjDwB;;QAEJ,+HAAA,CAAA,WAAQ;;;KAFJ","debugId":null}},
    {"offset": {"line": 330, "column": 0}, "map": {"version":3,"sources":["file:///Users/lukanetzler/Desktop/Care%20Kit/src/components/affirmation-card.tsx"],"sourcesContent":["'use client';\n\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from '@/components/ui/card';\nimport { ArrowRight } from '@/components/icons';\n\ninterface AffirmationCardProps {\n  affirmation: string;\n  onContinue: () => void;\n}\n\nexport default function AffirmationCard({ affirmation, onContinue }: AffirmationCardProps) {\n  return (\n    <Card className=\"shadow-lg text-center animate-in fade-in-50 duration-500\">\n      <CardHeader>\n        <CardTitle className=\"font-headline\">Your Affirmation</CardTitle>\n        <CardDescription>Take a moment to read and reflect.</CardDescription>\n      </CardHeader>\n      <CardContent>\n        <p className=\"text-2xl font-semibold font-headline text-accent-foreground leading-relaxed\">\n          {affirmation}\n        </p>\n      </CardContent>\n      <CardFooter>\n        <Button className=\"w-full\" onClick={onContinue}>\n          Continue <ArrowRight className=\"ml-2 h-4 w-4\" />\n        </Button>\n      </CardFooter>\n    </Card>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAJA;;;;;AAWe,SAAS,gBAAgB,EAAE,WAAW,EAAE,UAAU,EAAwB;IACvF,qBACE,6LAAC,mIAAA,CAAA,OAAI;QAAC,WAAU;;0BACd,6LAAC,mIAAA,CAAA,aAAU;;kCACT,6LAAC,mIAAA,CAAA,YAAS;wBAAC,WAAU;kCAAgB;;;;;;kCACrC,6LAAC,mIAAA,CAAA,kBAAe;kCAAC;;;;;;;;;;;;0BAEnB,6LAAC,mIAAA,CAAA,cAAW;0BACV,cAAA,6LAAC;oBAAE,WAAU;8BACV;;;;;;;;;;;0BAGL,6LAAC,mIAAA,CAAA,aAAU;0BACT,cAAA,6LAAC,qIAAA,CAAA,SAAM;oBAAC,WAAU;oBAAS,SAAS;;wBAAY;sCACrC,6LAAC,8HAAA,CAAA,aAAU;4BAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;AAKzC;KAnBwB","debugId":null}},
    {"offset": {"line": 426, "column": 0}, "map": {"version":3,"sources":["file:///Users/lukanetzler/Desktop/Care%20Kit/src/lib/affirmations.ts"],"sourcesContent":["export const affirmations: string[] = [\n  \"My child sees the world with clarity and honesty, reminding me to embrace truth and authenticity in all I do.\",\n  \"Parenting my child has made me more patient, compassionate, and understanding—not just as a parent, but as a person.\",\n  \"I have learned to focus on what I can control, creating a safe and loving environment where my child can thrive.\",\n  \"My child's sense of justice, kindness, and inclusion inspires me to be a better advocate for all.\",\n  \"Through my child's eyes, I see the beauty in the small victories—every milestone is a triumph worth celebrating.\",\n  \"I have gained strength, resilience, and a powerful voice by advocating for my child—and in doing so, I have learned to advocate for myself too.\",\n  \"The way my child experiences joy—through flapping their arms, jumping, and laughing—teaches me to embrace happiness in its purest form.\",\n  \"My child’s love for their passions is contagious, reminding me that curiosity and excitement are gifts to be cherished.\",\n  \"Because of my child, I see the world differently—not as it is expected to be, but as it truly is.\",\n  \"My child has taught me the power of communication beyond words—every gesture, every look, every sound is filled with meaning.\",\n  \"I no longer worry about the judgments of others. I focus on my child, their needs, their joy, and their incredible journey.\",\n  \"I am part of a wonderful community of parents who support, uplift, and inspire one another—this journey is never walked alone.\",\n  \"My child’s presence in my life is a privilege, a daily reminder that being different is not only okay—it is beautiful.\",\n  \"I am forever grateful for the lessons my child teaches me—patience, acceptance, and the courage to see the world in a new way.\",\n];\n"],"names":[],"mappings":";;;AAAO,MAAM,eAAyB;IACpC;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD","debugId":null}},
    {"offset": {"line": 454, "column": 0}, "map": {"version":3,"sources":["file:///Users/lukanetzler/Desktop/Care%20Kit/src/components/ui/tooltip.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,kBAAkB,sKAAA,CAAA,WAAyB;AAEjD,MAAM,UAAU,sKAAA,CAAA,OAAqB;AAErC,MAAM,iBAAiB,sKAAA,CAAA,UAAwB;AAE/C,MAAM,+BAAiB,CAAA,GAAA,6JAAA,CAAA,aAAgB,AAAD,OAGpC,CAAC,EAAE,SAAS,EAAE,aAAa,CAAC,EAAE,GAAG,OAAO,EAAE,oBAC1C,6LAAC,sKAAA,CAAA,UAAwB;QACvB,KAAK;QACL,YAAY;QACZ,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,sYACA;QAED,GAAG,KAAK;;;;;;;AAGb,eAAe,WAAW,GAAG,sKAAA,CAAA,UAAwB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 497, "column": 0}, "map": {"version":3,"sources":["file:///Users/lukanetzler/Desktop/Care%20Kit/src/services/stress-data-service.ts"],"sourcesContent":["// src/services/stress-data-service.ts\n\nimport { collection, addDoc } from 'firebase/firestore';\nimport { db } from '@/lib/firebase';\n\nexport interface StressDataRecord {\n  creatorId: string; // Add creatorId to the interface\n  affirmationType: 'morning' | 'evening' | null;\n  affirmation: string;\n  stressBefore: number | null;\n  stressAfter: number | null;\n  timestamp: string;\n  // Time tracking fields\n  flowStartTime: string; // When the user started the flow\n  affirmationStartTime: string; // When the affirmation was shown\n  affirmationEndTime: string; // When user clicked continue from affirmation\n  flowEndTime: string; // When the user completed the flow\n  affirmationDurationSeconds: number; // Time spent viewing affirmation\n  totalFlowDurationSeconds: number; // Total time from start to completion\n}\n\nexport async function saveStressData(data: StressDataRecord) {\n  console.log('Inside saveStressData:');\n  console.log('Data to be saved:', data);\n  \n  try {\n    // Your Firestore rules now require `creatorId` in the data payload.\n    // The client component is now sending it.\n    const docRef = await addDoc(collection(db, 'stressData'), data);\n    console.log('Document written with ID: ', docRef.id);\n    return { success: true, id: docRef.id };\n  } catch (e) {\n    console.error('Error adding document: ', e);\n    if (e instanceof Error) {\n      return { success: false, error: e.message };\n    }\n    return { success: false, error: 'Failed to save data' };\n  }\n}\n"],"names":[],"mappings":"AAAA,sCAAsC;;;;AAEtC;AAAA;AACA;;;AAkBO,eAAe,eAAe,IAAsB;IACzD,QAAQ,GAAG,CAAC;IACZ,QAAQ,GAAG,CAAC,qBAAqB;IAEjC,IAAI;QACF,oEAAoE;QACpE,0CAA0C;QAC1C,MAAM,SAAS,MAAM,CAAA,GAAA,sKAAA,CAAA,SAAM,AAAD,EAAE,CAAA,GAAA,sKAAA,CAAA,aAAU,AAAD,EAAE,yHAAA,CAAA,KAAE,EAAE,eAAe;QAC1D,QAAQ,GAAG,CAAC,8BAA8B,OAAO,EAAE;QACnD,OAAO;YAAE,SAAS;YAAM,IAAI,OAAO,EAAE;QAAC;IACxC,EAAE,OAAO,GAAG;QACV,QAAQ,KAAK,CAAC,2BAA2B;QACzC,IAAI,aAAa,OAAO;YACtB,OAAO;gBAAE,SAAS;gBAAO,OAAO,EAAE,OAAO;YAAC;QAC5C;QACA,OAAO;YAAE,SAAS;YAAO,OAAO;QAAsB;IACxD;AACF","debugId":null}},
    {"offset": {"line": 541, "column": 0}, "map": {"version":3,"sources":["file:///Users/lukanetzler/Desktop/Care%20Kit/src/lib/study-day.ts"],"sourcesContent":["/**\n * Calculate the current study day (1-based) from the study start date\n * @param studyStartDate ISO string of when the study started\n * @returns The current study day (1, 2, 3, ...)\n */\nexport function getStudyDay(studyStartDate: string): number {\n  const startDate = new Date(studyStartDate);\n  const today = new Date();\n\n  // Reset both dates to start of day for accurate day calculation\n  startDate.setHours(0, 0, 0, 0);\n  today.setHours(0, 0, 0, 0);\n\n  const diffTime = today.getTime() - startDate.getTime();\n  const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));\n\n  // Study day is 1-based (day 1, day 2, etc.)\n  return diffDays + 1;\n}\n\n/**\n * Calculate the affirmation index based on study day and time of day\n * Formula: (studyDay % 7) × 2 + (isMorning ? 0 : 1)\n * Morning affirmations: 0, 2, 4, 6, 8, 10, 12\n * Evening affirmations: 1, 3, 5, 7, 9, 11, 13\n *\n * @param studyStartDate ISO string of when the study started\n * @param isMorning Whether it's a morning session\n * @returns The affirmation index (0-13)\n */\nexport function getAffirmationIndex(studyStartDate: string, isMorning: boolean): number {\n  const studyDay = getStudyDay(studyStartDate);\n\n  // Use modulo to cycle through days 0-6 (representing day 1-7 in the cycle)\n  const cycleDay = (studyDay - 1) % 7;\n\n  // Calculate affirmation index\n  const affirmationIndex = cycleDay * 2 + (isMorning ? 0 : 1);\n\n  return affirmationIndex;\n}\n\n/**\n * Check if the user has completed at least 7 days of the study\n * @param studyStartDate ISO string of when the study started\n * @returns True if user has completed 7+ days\n */\nexport function hasCompletedSevenDays(studyStartDate: string): boolean {\n  const studyDay = getStudyDay(studyStartDate);\n  return studyDay >= 7;\n}\n"],"names":[],"mappings":"AAAA;;;;CAIC;;;;;AACM,SAAS,YAAY,cAAsB;IAChD,MAAM,YAAY,IAAI,KAAK;IAC3B,MAAM,QAAQ,IAAI;IAElB,gEAAgE;IAChE,UAAU,QAAQ,CAAC,GAAG,GAAG,GAAG;IAC5B,MAAM,QAAQ,CAAC,GAAG,GAAG,GAAG;IAExB,MAAM,WAAW,MAAM,OAAO,KAAK,UAAU,OAAO;IACpD,MAAM,WAAW,KAAK,KAAK,CAAC,WAAW,CAAC,OAAO,KAAK,KAAK,EAAE;IAE3D,4CAA4C;IAC5C,OAAO,WAAW;AACpB;AAYO,SAAS,oBAAoB,cAAsB,EAAE,SAAkB;IAC5E,MAAM,WAAW,YAAY;IAE7B,2EAA2E;IAC3E,MAAM,WAAW,CAAC,WAAW,CAAC,IAAI;IAElC,8BAA8B;IAC9B,MAAM,mBAAmB,WAAW,IAAI,CAAC,YAAY,IAAI,CAAC;IAE1D,OAAO;AACT;AAOO,SAAS,sBAAsB,cAAsB;IAC1D,MAAM,WAAW,YAAY;IAC7B,OAAO,YAAY;AACrB","debugId":null}},
    {"offset": {"line": 582, "column": 0}, "map": {"version":3,"sources":["file:///Users/lukanetzler/Desktop/Care%20Kit/src/lib/notifications.ts"],"sourcesContent":["import { getToken, onMessage, getMessaging, isSupported } from 'firebase/messaging';\nimport { app } from './firebase';\n\n// Request notification permission and get FCM token\nexport async function requestNotificationPermission(): Promise<string | null> {\n  try {\n    // Check if messaging is supported\n    const supported = await isSupported();\n    if (!supported) {\n      console.log('Firebase Messaging is not supported in this browser');\n      return null;\n    }\n\n    // Request permission\n    const permission = await Notification.requestPermission();\n\n    if (permission === 'granted') {\n      console.log('Notification permission granted.');\n\n      // Unregister any existing service workers first\n      if ('serviceWorker' in navigator) {\n        const registrations = await navigator.serviceWorker.getRegistrations();\n        for (const registration of registrations) {\n          console.log('Unregistering existing service worker:', registration.scope);\n          await registration.unregister();\n        }\n      }\n\n      // Small delay to ensure clean state\n      await new Promise(resolve => setTimeout(resolve, 500));\n\n      // Register service worker\n      if ('serviceWorker' in navigator) {\n        try {\n          const registration = await navigator.serviceWorker.register('/firebase-messaging-sw.js', {\n            scope: '/'\n          });\n          console.log('Service Worker registered:', registration);\n\n          // Wait for service worker to be active\n          if (registration.installing) {\n            await new Promise((resolve) => {\n              registration.installing!.addEventListener('statechange', function() {\n                if (this.state === 'activated') {\n                  resolve(null);\n                }\n              });\n            });\n          }\n\n          await navigator.serviceWorker.ready;\n          console.log('Service Worker is ready');\n        } catch (swError) {\n          console.error('Service Worker registration failed:', swError);\n          return null;\n        }\n      }\n\n      // Initialize messaging\n      const messaging = getMessaging(app);\n\n      // Get FCM token with retry logic\n      let token = null;\n      let retries = 0;\n      const maxRetries = 3;\n\n      while (!token && retries < maxRetries) {\n        try {\n          token = await getToken(messaging, {\n            vapidKey: 'BAflMYuUiIVjaCaCxmVmwYp8801GpsUz5ic5hLsymTpnZEr2DrnHfwL7PLdPpi84JY8QKRqcl2bNqJtnbEFRpm0',\n            serviceWorkerRegistration: await navigator.serviceWorker.ready\n          });\n\n          if (token) {\n            console.log('FCM Token obtained successfully');\n            break;\n          }\n        } catch (tokenError: any) {\n          retries++;\n          console.warn(`Token retrieval attempt ${retries}/${maxRetries} failed:`, tokenError.message);\n\n          if (retries < maxRetries) {\n            // Wait before retry\n            await new Promise(resolve => setTimeout(resolve, 1000 * retries));\n          } else {\n            throw tokenError;\n          }\n        }\n      }\n\n      if (token) {\n        console.log('FCM Token:', token);\n        return token;\n      } else {\n        console.log('No registration token available. Check service worker registration.');\n        return null;\n      }\n    } else if (permission === 'denied') {\n      console.log('Notification permission denied.');\n      return null;\n    } else {\n      console.log('Notification permission not granted yet.');\n      return null;\n    }\n  } catch (error) {\n    console.error('An error occurred while requesting notification permission:', error);\n    return null;\n  }\n}\n\n// Listen for foreground messages\nexport async function listenForMessages(callback: (payload: any) => void) {\n  try {\n    const supported = await isSupported();\n    if (!supported) {\n      console.log('Firebase Messaging is not supported');\n      return;\n    }\n\n    const messaging = getMessaging(app);\n\n    onMessage(messaging, (payload) => {\n      console.log('Message received in foreground:', payload);\n\n      // Show system tray notification even when app is in foreground\n      if (payload.notification) {\n        const notificationTitle = payload.notification.title || 'BRAIN KIT';\n        const notificationOptions = {\n          body: payload.notification.body || 'You have a new notification',\n          icon: '/brain-kit-capacitor-logo.png',\n          badge: '/brain-kit-capacitor-logo.png',\n          tag: 'brain-kit-notification', // Prevents duplicate notifications\n          requireInteraction: false, // Auto-dismiss after some time\n          vibrate: [200, 100, 200], // Vibration pattern\n          data: payload.data || {}, // Include custom data\n          silent: false, // Play notification sound\n        };\n\n        // Create the notification\n        const notification = new Notification(notificationTitle, notificationOptions);\n\n        // Handle notification click - focus the app\n        notification.onclick = (event) => {\n          event.preventDefault();\n          window.focus();\n          notification.close();\n\n          // If there's a URL in the payload, navigate to it\n          if (payload.data?.url) {\n            window.location.href = payload.data.url;\n          }\n        };\n\n        console.log('System tray notification shown in foreground');\n      }\n\n      // Also trigger the callback for any UI updates (like toast)\n      callback(payload);\n    });\n  } catch (error) {\n    console.error('Error setting up message listener:', error);\n  }\n}\n\n// Save FCM token to user's Firestore document\nexport async function saveFCMTokenToUser(userId: string, token: string) {\n  try {\n    const { db } = await import('./firebase');\n    const { doc, updateDoc, arrayUnion } = await import('firebase/firestore');\n\n    const userRef = doc(db, 'users', userId);\n    await updateDoc(userRef, {\n      fcmTokens: arrayUnion(token), // Store as array in case user has multiple devices\n      lastTokenUpdate: new Date().toISOString()\n    });\n\n    console.log('FCM token saved to user document');\n  } catch (error) {\n    console.error('Error saving FCM token:', error);\n  }\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 755, "column": 0}, "map": {"version":3,"sources":["file:///Users/lukanetzler/Desktop/Care%20Kit/src/components/notification-setup.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useAuth } from '@/context/AuthContext';\nimport { requestNotificationPermission, saveFCMTokenToUser, listenForMessages } from '@/lib/notifications';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Bell, BellOff, X } from '@/components/icons';\nimport { useToast } from '@/hooks/use-toast';\n\nexport default function NotificationSetup() {\n  const { user } = useAuth();\n  const { toast } = useToast();\n  const [notificationStatus, setNotificationStatus] = useState<'unknown' | 'granted' | 'denied' | 'default'>('unknown');\n  const [isLoading, setIsLoading] = useState(false);\n  const [showPrompt, setShowPrompt] = useState(false);\n\n  useEffect(() => {\n    // Check current notification permission status\n    if (typeof window !== 'undefined' && 'Notification' in window) {\n      const currentStatus = Notification.permission;\n      setNotificationStatus(currentStatus);\n\n      // Show prompt if not granted and not dismissed\n      const dismissed = localStorage.getItem('notification-prompt-dismissed');\n      if (currentStatus === 'default' && !dismissed) {\n        setShowPrompt(true);\n      }\n\n      // If already granted, set up FCM token\n      if (currentStatus === 'granted' && user) {\n        setupNotifications();\n      }\n    }\n  }, [user]);\n\n  const setupNotifications = async () => {\n    if (!user) return;\n\n    setIsLoading(true);\n    try {\n      const token = await requestNotificationPermission();\n\n      if (token) {\n        await saveFCMTokenToUser(user.uid, token);\n        setNotificationStatus('granted');\n        localStorage.removeItem('notification-prompt-dismissed');\n\n        toast({\n          title: 'Notifications enabled!',\n          description: 'You will receive reminders for your daily affirmations.',\n        });\n\n        // Listen for foreground messages\n        listenForMessages((payload) => {\n          console.log('Received notification:', payload);\n          toast({\n            title: payload.notification?.title || 'Notification',\n            description: payload.notification?.body || '',\n          });\n        });\n      } else {\n        setNotificationStatus('denied');\n        toast({\n          title: 'Notifications blocked',\n          description: 'Please enable notifications in your browser settings to receive reminders.',\n          variant: 'destructive',\n        });\n      }\n    } catch (error) {\n      console.error('Error setting up notifications:', error);\n      toast({\n        title: 'Error',\n        description: 'Failed to set up notifications. Please try again.',\n        variant: 'destructive',\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleEnableNotifications = async () => {\n    await setupNotifications();\n  };\n\n  const handleDismiss = () => {\n    setShowPrompt(false);\n    localStorage.setItem('notification-prompt-dismissed', 'true');\n  };\n\n  // Don't show if already granted or if user dismissed and status is not denied\n  if (notificationStatus === 'granted' || (!showPrompt && notificationStatus !== 'denied')) {\n    return null;\n  }\n\n  // Don't show if notifications aren't supported\n  if (typeof window === 'undefined' || !('Notification' in window)) {\n    return null;\n  }\n\n  return (\n    <Card className=\"mb-4 border-primary/50 bg-primary/5\">\n      <CardHeader className=\"relative\">\n        <Button\n          variant=\"ghost\"\n          size=\"icon\"\n          className=\"absolute top-2 right-2 h-6 w-6\"\n          onClick={handleDismiss}\n        >\n          <X className=\"h-4 w-4\" />\n        </Button>\n        <div className=\"flex items-center gap-2\">\n          <Bell className=\"h-5 w-5 text-primary\" />\n          <CardTitle className=\"text-lg\">Enable Notifications</CardTitle>\n        </div>\n        <CardDescription>\n          Stay on track with your daily affirmations. We'll send you gentle reminders morning and evening.\n          {notificationStatus === 'denied' && (\n            <span className=\"block mt-2 text-destructive font-medium\">\n              Notifications are currently blocked. Please enable them in your browser settings.\n            </span>\n          )}\n        </CardDescription>\n      </CardHeader>\n      <CardContent>\n        <Button\n          onClick={handleEnableNotifications}\n          disabled={isLoading}\n          className=\"w-full\"\n        >\n          {isLoading ? 'Setting up...' : notificationStatus === 'denied' ? 'Open Browser Settings' : 'Enable Notifications'}\n        </Button>\n      </CardContent>\n    </Card>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 969, "column": 0}, "map": {"version":3,"sources":["file:///Users/lukanetzler/Desktop/Care%20Kit/src/components/notification-toggle.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useAuth } from '@/context/AuthContext';\nimport { requestNotificationPermission, saveFCMTokenToUser, listenForMessages } from '@/lib/notifications';\nimport { Button } from '@/components/ui/button';\nimport { Bell, BellOff } from '@/components/icons';\nimport { useToast } from '@/hooks/use-toast';\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\";\n\nexport default function NotificationToggle() {\n  const { user } = useAuth();\n  const { toast } = useToast();\n  const [notificationStatus, setNotificationStatus] = useState<'granted' | 'denied' | 'default'>('default');\n  const [isLoading, setIsLoading] = useState(false);\n\n  useEffect(() => {\n    // Check current notification permission status\n    if (typeof window !== 'undefined' && 'Notification' in window) {\n      setNotificationStatus(Notification.permission);\n\n      // If already granted, set up listener\n      if (Notification.permission === 'granted') {\n        listenForMessages((payload) => {\n          console.log('Received notification:', payload);\n          toast({\n            title: payload.notification?.title || 'Notification',\n            description: payload.notification?.body || '',\n          });\n        });\n      }\n    }\n  }, []);\n\n  const handleToggleNotifications = async () => {\n    if (!user) return;\n\n    if (notificationStatus === 'granted') {\n      // Can't programmatically disable - show instruction\n      toast({\n        title: 'Notifications are enabled',\n        description: 'To disable, go to your browser settings → Site Settings → Notifications',\n      });\n      return;\n    }\n\n    setIsLoading(true);\n    try {\n      const token = await requestNotificationPermission();\n\n      if (token) {\n        await saveFCMTokenToUser(user.uid, token);\n        setNotificationStatus('granted');\n\n        toast({\n          title: 'Notifications enabled!',\n          description: 'You will receive reminders for your daily affirmations.',\n        });\n\n        // Listen for foreground messages\n        listenForMessages((payload) => {\n          console.log('Received notification:', payload);\n          toast({\n            title: payload.notification?.title || 'Notification',\n            description: payload.notification?.body || '',\n          });\n        });\n      } else {\n        setNotificationStatus('denied');\n        toast({\n          title: 'Notifications blocked',\n          description: 'Please enable notifications in your browser settings.',\n          variant: 'destructive',\n        });\n      }\n    } catch (error) {\n      console.error('Error toggling notifications:', error);\n      toast({\n        title: 'Error',\n        description: 'Failed to enable notifications. Please try again.',\n        variant: 'destructive',\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Don't show if notifications aren't supported\n  if (typeof window === 'undefined' || !('Notification' in window)) {\n    return null;\n  }\n\n  const isEnabled = notificationStatus === 'granted';\n  const isDenied = notificationStatus === 'denied';\n\n  return (\n    <TooltipProvider>\n      <Tooltip>\n        <TooltipTrigger asChild>\n          <Button\n            variant={isEnabled ? 'default' : 'outline'}\n            size=\"icon\"\n            onClick={handleToggleNotifications}\n            disabled={isLoading}\n            className={isDenied ? 'opacity-50' : ''}\n          >\n            {isEnabled ? (\n              <Bell className=\"h-4 w-4\" />\n            ) : (\n              <BellOff className=\"h-4 w-4\" />\n            )}\n            <span className=\"sr-only\">\n              {isEnabled ? 'Notifications enabled' : 'Enable notifications'}\n            </span>\n          </Button>\n        </TooltipTrigger>\n        <TooltipContent>\n          <p>\n            {isEnabled\n              ? 'Notifications are enabled'\n              : isDenied\n              ? 'Notifications blocked - check browser settings'\n              : 'Click to enable notifications'}\n          </p>\n        </TooltipContent>\n      </Tooltip>\n    </TooltipProvider>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1156, "column": 0}, "map": {"version":3,"sources":["file:///Users/lukanetzler/Desktop/Care%20Kit/src/components/install-pwa-setup.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Download, X } from '@/components/icons';\nimport { useToast } from '@/hooks/use-toast';\n\ninterface BeforeInstallPromptEvent extends Event {\n  prompt: () => Promise<void>;\n  userChoice: Promise<{ outcome: 'accepted' | 'dismissed' }>;\n}\n\n// Detect platform\nconst isIOS = () => {\n  if (typeof window === 'undefined') return false;\n  const userAgent = window.navigator.userAgent.toLowerCase();\n  return /iphone|ipad|ipod/.test(userAgent);\n};\n\nconst isAndroid = () => {\n  if (typeof window === 'undefined') return false;\n  const userAgent = window.navigator.userAgent.toLowerCase();\n  return /android/.test(userAgent);\n};\n\nconst isInStandaloneMode = () => {\n  if (typeof window === 'undefined') return false;\n\n  // Check PWA standalone mode (works on all platforms)\n  if (window.matchMedia('(display-mode: standalone)').matches) {\n    return true;\n  }\n\n  // Check iOS standalone\n  if ((window.navigator as any).standalone === true) {\n    return true;\n  }\n\n  // Check Android TWA/standalone\n  if (document.referrer.includes('android-app://')) {\n    return true;\n  }\n\n  return false;\n};\n\nexport default function InstallPWASetup() {\n  const { toast } = useToast();\n  const [deferredPrompt, setDeferredPrompt] = useState<BeforeInstallPromptEvent | null>(null);\n  const [isInstalled, setIsInstalled] = useState(false);\n  const [showPrompt, setShowPrompt] = useState(false);\n  const [platform, setPlatform] = useState<'ios' | 'android' | 'desktop' | null>(null);\n\n  useEffect(() => {\n    // Check if already installed\n    if (isInStandaloneMode()) {\n      setIsInstalled(true);\n      return;\n    }\n\n    // Detect platform\n    if (isIOS()) {\n      setPlatform('ios');\n      // iOS always shows manual instructions\n      const dismissed = localStorage.getItem('pwa-install-dismissed-ios');\n      if (!dismissed) {\n        setShowPrompt(true);\n      }\n    } else if (isAndroid()) {\n      setPlatform('android');\n    } else {\n      setPlatform('desktop');\n    }\n\n    // Listen for beforeinstallprompt event (Chrome/Edge/Android)\n    const handleBeforeInstallPrompt = (e: Event) => {\n      e.preventDefault();\n      const promptEvent = e as BeforeInstallPromptEvent;\n      setDeferredPrompt(promptEvent);\n\n      // Check if user previously dismissed\n      const dismissed = localStorage.getItem('pwa-install-dismissed');\n      if (!dismissed) {\n        setShowPrompt(true);\n      }\n\n      console.log('PWA install prompt available');\n    };\n\n    // Listen for app installed event\n    const handleAppInstalled = () => {\n      console.log('PWA was installed');\n      setIsInstalled(true);\n      setShowPrompt(false);\n      setDeferredPrompt(null);\n      localStorage.removeItem('pwa-install-dismissed');\n      localStorage.removeItem('pwa-install-dismissed-ios');\n    };\n\n    window.addEventListener('beforeinstallprompt', handleBeforeInstallPrompt);\n    window.addEventListener('appinstalled', handleAppInstalled);\n\n    return () => {\n      window.removeEventListener('beforeinstallprompt', handleBeforeInstallPrompt);\n      window.removeEventListener('appinstalled', handleAppInstalled);\n    };\n  }, []);\n\n  const handleInstallClick = async () => {\n    // Android/Desktop with native prompt\n    if (deferredPrompt) {\n      try {\n        await deferredPrompt.prompt();\n        const choiceResult = await deferredPrompt.userChoice;\n\n        if (choiceResult.outcome === 'accepted') {\n          console.log('User accepted the install prompt');\n          setIsInstalled(true);\n          toast({\n            title: 'App installed!',\n            description: 'BRAIN KIT has been added to your home screen.',\n          });\n        } else {\n          console.log('User dismissed the install prompt');\n          toast({\n            title: 'Installation cancelled',\n            description: 'You can install the app later from the menu.',\n          });\n        }\n\n        setDeferredPrompt(null);\n        setShowPrompt(false);\n      } catch (error) {\n        console.error('Error showing install prompt:', error);\n      }\n    }\n  };\n\n  const handleDismiss = () => {\n    setShowPrompt(false);\n    if (platform === 'ios') {\n      localStorage.setItem('pwa-install-dismissed-ios', 'true');\n    } else {\n      localStorage.setItem('pwa-install-dismissed', 'true');\n    }\n  };\n\n  // Don't show if already installed or user dismissed\n  if (isInstalled || !showPrompt) {\n    return null;\n  }\n\n  // iOS Manual Instructions\n  if (platform === 'ios') {\n    return (\n      <Card className=\"mb-4 border-primary/50 bg-primary/5\">\n        <CardHeader className=\"relative\">\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            className=\"absolute top-2 right-2 h-6 w-6\"\n            onClick={handleDismiss}\n          >\n            <X className=\"h-4 w-4\" />\n          </Button>\n          <div className=\"flex items-center gap-2\">\n            <Download className=\"h-5 w-5 text-primary\" />\n            <CardTitle className=\"text-lg\">Install App (iOS)</CardTitle>\n          </div>\n          <CardDescription className=\"space-y-2 text-left\">\n            <p>To install BRAIN KIT on your iPhone/iPad:</p>\n            <ol className=\"list-decimal list-inside space-y-1 ml-2\">\n              <li>Tap the <strong>Share</strong> button (square with arrow)</li>\n              <li>Scroll down and tap <strong>Add to Home Screen</strong></li>\n              <li>Tap <strong>Add</strong> in the top right corner</li>\n            </ol>\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <Button\n            variant=\"secondary\"\n            onClick={handleDismiss}\n            className=\"w-full\"\n          >\n            Got it\n          </Button>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  // Android/Desktop with native prompt\n  return (\n    <Card className=\"mb-4 border-primary/50 bg-primary/5\">\n      <CardHeader className=\"relative\">\n        <Button\n          variant=\"ghost\"\n          size=\"icon\"\n          className=\"absolute top-2 right-2 h-6 w-6\"\n          onClick={handleDismiss}\n        >\n          <X className=\"h-4 w-4\" />\n        </Button>\n        <div className=\"flex items-center gap-2\">\n          <Download className=\"h-5 w-5 text-primary\" />\n          <CardTitle className=\"text-lg\">Install App</CardTitle>\n        </div>\n        <CardDescription>\n          Install BRAIN KIT to your home screen for a better experience with faster loading and offline access.\n        </CardDescription>\n      </CardHeader>\n      <CardContent>\n        <Button\n          onClick={handleInstallClick}\n          className=\"w-full\"\n          disabled={!deferredPrompt}\n        >\n          {deferredPrompt ? 'Install to Home Screen' : 'Install via Browser Menu'}\n        </Button>\n        {!deferredPrompt && (\n          <p className=\"text-xs text-muted-foreground mt-2 text-center\">\n            Use your browser's menu to install this app\n          </p>\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1571, "column": 0}, "map": {"version":3,"sources":["file:///Users/lukanetzler/Desktop/Care%20Kit/src/components/install-pwa-button-floating.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Download } from '@/components/icons';\nimport { useToast } from '@/hooks/use-toast';\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\";\n\ninterface BeforeInstallPromptEvent extends Event {\n  prompt: () => Promise<void>;\n  userChoice: Promise<{ outcome: 'accepted' | 'dismissed' }>;\n}\n\n// Detect platform\nconst isIOS = () => {\n  if (typeof window === 'undefined') return false;\n  const userAgent = window.navigator.userAgent.toLowerCase();\n  return /iphone|ipad|ipod/.test(userAgent);\n};\n\nconst isInStandaloneMode = () => {\n  if (typeof window === 'undefined') return false;\n\n  // Check PWA standalone mode (works on all platforms)\n  if (window.matchMedia('(display-mode: standalone)').matches) {\n    return true;\n  }\n\n  // Check iOS standalone\n  if ((window.navigator as any).standalone === true) {\n    return true;\n  }\n\n  // Check Android TWA/standalone\n  if (document.referrer.includes('android-app://')) {\n    return true;\n  }\n\n  return false;\n};\n\nexport default function InstallPWAButtonFloating() {\n  const { toast } = useToast();\n  const [deferredPrompt, setDeferredPrompt] = useState<BeforeInstallPromptEvent | null>(null);\n  const [isInstalled, setIsInstalled] = useState(false);\n  const [showButton, setShowButton] = useState(false);\n  const [platform, setPlatform] = useState<'ios' | 'other' | null>(null);\n\n  useEffect(() => {\n    // Check if already installed\n    if (isInStandaloneMode()) {\n      setIsInstalled(true);\n      return;\n    }\n\n    // Detect platform\n    if (isIOS()) {\n      setPlatform('ios');\n      setShowButton(true); // Always show on iOS\n    } else {\n      setPlatform('other');\n    }\n\n    // Listen for beforeinstallprompt event (Chrome/Edge/Android)\n    const handleBeforeInstallPrompt = (e: Event) => {\n      e.preventDefault();\n      const promptEvent = e as BeforeInstallPromptEvent;\n      setDeferredPrompt(promptEvent);\n      setShowButton(true);\n      console.log('PWA install prompt available');\n    };\n\n    // Listen for app installed event\n    const handleAppInstalled = () => {\n      console.log('PWA was installed');\n      setIsInstalled(true);\n      setShowButton(false);\n      setDeferredPrompt(null);\n    };\n\n    window.addEventListener('beforeinstallprompt', handleBeforeInstallPrompt);\n    window.addEventListener('appinstalled', handleAppInstalled);\n\n    return () => {\n      window.removeEventListener('beforeinstallprompt', handleBeforeInstallPrompt);\n      window.removeEventListener('appinstalled', handleAppInstalled);\n    };\n  }, []);\n\n  const handleInstallClick = async () => {\n    if (platform === 'ios') {\n      // iOS - show instructions\n      toast({\n        title: 'Install on iOS',\n        description: '1. Tap the Share button (⬆️)\\n2. Scroll and tap \"Add to Home Screen\"\\n3. Tap \"Add\"',\n        duration: 10000,\n      });\n    } else if (deferredPrompt) {\n      // Android/Desktop with native prompt\n      try {\n        await deferredPrompt.prompt();\n        const choiceResult = await deferredPrompt.userChoice;\n\n        if (choiceResult.outcome === 'accepted') {\n          console.log('User accepted the install prompt');\n          setIsInstalled(true);\n          toast({\n            title: 'App installed!',\n            description: 'BRAIN KIT has been added to your home screen.',\n          });\n        } else {\n          console.log('User dismissed the install prompt');\n        }\n\n        setDeferredPrompt(null);\n      } catch (error) {\n        console.error('Error showing install prompt:', error);\n      }\n    } else {\n      // Fallback - browser doesn't support beforeinstallprompt\n      toast({\n        title: 'Install via browser menu',\n        description: 'Use your browser\\'s menu to install this app to your home screen.',\n        duration: 5000,\n      });\n    }\n  };\n\n  // Don't show if already installed\n  if (isInstalled || !showButton) {\n    return null;\n  }\n\n  return (\n    <TooltipProvider>\n      <Tooltip>\n        <TooltipTrigger asChild>\n          <Button\n            onClick={handleInstallClick}\n            size=\"lg\"\n            className=\"fixed bottom-6 right-6 rounded-full shadow-lg h-14 w-14 z-50\"\n            style={{\n              bottom: 'max(1.5rem, calc(1.5rem + var(--safe-area-inset-bottom)))',\n              right: 'max(1.5rem, calc(1.5rem + var(--safe-area-inset-right)))'\n            }}\n          >\n            <Download className=\"h-6 w-6\" />\n            <span className=\"sr-only\">Install App</span>\n          </Button>\n        </TooltipTrigger>\n        <TooltipContent side=\"left\">\n          <p>Install app to home screen</p>\n        </TooltipContent>\n      </Tooltip>\n    </TooltipProvider>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1787, "column": 0}, "map": {"version":3,"sources":["file:///Users/lukanetzler/Desktop/Care%20Kit/src/app/page.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { useAuth } from '@/context/AuthContext';\nimport { useIsAdmin } from '@/hooks/useIsAdmin';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { ArrowRight, LogOut, Sunrise, Sunset, Lock, Shield } from '@/components/icons';\nimport StressRating from '@/components/stress-rating';\nimport AffirmationCard from '@/components/affirmation-card';\nimport { affirmations } from '@/lib/affirmations';\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from '@/components/ui/tooltip';\nimport { saveStressData, type StressDataRecord } from '@/services/stress-data-service';\nimport { useToast } from '@/hooks/use-toast';\nimport { getAffirmationIndex, getStudyDay, hasCompletedSevenDays } from '@/lib/study-day';\nimport { doc, updateDoc } from 'firebase/firestore';\nimport { db } from '@/lib/firebase';\nimport NotificationSetup from '@/components/notification-setup';\nimport NotificationToggle from '@/components/notification-toggle';\nimport InstallPWASetup from '@/components/install-pwa-setup';\nimport InstallPWAButtonFloating from '@/components/install-pwa-button-floating';\n\nimport { z } from \"zod\"; // Import z if not already imported\n\ntype FlowState = 'idle' | 'pre-stress' | 'affirmation' | 'post-stress' | 'complete';\ntype StressData = { pre: number | null; post: number | null };\n\nexport default function Dashboard() {\n  const { user, loading, logout } = useAuth();\n  const router = useRouter();\n  const { toast } = useToast();\n  const [flowState, setFlowState] = useState<FlowState>('idle');\n  const [stressData, setStressData] = useState<StressData>({ pre: null, post: null });\n  const [currentAffirmation, setCurrentAffirmation] = useState('');\n  const [affirmationType, setAffirmationType] = useState<'morning' | 'evening' | null>(null);\n  const [currentHour, setCurrentHour] = useState<number | null>(null);\n  const [isClient, setIsClient] = useState(false);\n  const [studyDay, setStudyDay] = useState<number | null>(null);\n  const isAdmin = useIsAdmin();\n\n  // Time tracking state\n  const [flowStartTime, setFlowStartTime] = useState<Date | null>(null);\n  const [affirmationStartTime, setAffirmationStartTime] = useState<Date | null>(null);\n  const [affirmationEndTime, setAffirmationEndTime] = useState<Date | null>(null);\n\n  useEffect(() => {\n    if (!loading && !user) {\n      console.log('No user found, redirecting to login');\n      router.push('/login');\n    }\n  }, [user, loading, router]);\n\n  // Safety timeout to prevent infinite loading\n  useEffect(() => {\n    const timeout = setTimeout(() => {\n      if (loading) {\n        console.warn('Loading timeout - forcing redirect to login');\n        router.push('/login');\n      }\n    }, 5000); // 5 second timeout\n\n    return () => clearTimeout(timeout);\n  }, [loading, router]);\n\n  useEffect(() => {\n    setIsClient(true);\n    setCurrentHour(new Date().getHours());\n\n    // Calculate study day if user has studyStartDate\n    if (user?.studyStartDate) {\n      const currentStudyDay = getStudyDay(user.studyStartDate);\n      setStudyDay(currentStudyDay);\n\n      // Check if user has completed 7 days and update flag if needed\n      if (!user.hasCompletedStudy && hasCompletedSevenDays(user.studyStartDate)) {\n        const userDocRef = doc(db, 'users', user.uid);\n        updateDoc(userDocRef, {\n          hasCompletedStudy: true,\n        }).catch((error) => {\n          console.error('Error updating hasCompletedStudy flag:', error);\n        });\n      }\n    }\n  }, [user]);\n\n  const handleStartFlow = (type: 'morning' | 'evening') => {\n    // Calculate affirmation based on study day and time of day\n    if (!user?.studyStartDate) {\n      toast({\n        title: 'Error',\n        description: 'Study start date not found. Please contact support.',\n        variant: 'destructive',\n      });\n      return;\n    }\n\n    const isMorning = type === 'morning';\n    const affirmationIdx = getAffirmationIndex(user.studyStartDate, isMorning);\n    setCurrentAffirmation(affirmations[affirmationIdx]);\n\n    setAffirmationType(type);\n    setFlowStartTime(new Date()); // Track when flow starts\n    setFlowState('pre-stress');\n  };\n\n  const handlePreStressSubmit = (rating: number) => {\n    setStressData({ ...stressData, pre: rating });\n    setAffirmationStartTime(new Date()); // Track when affirmation is shown\n    setFlowState('affirmation');\n  };\n\n  const handleContinueFromAffirmation = () => {\n    setAffirmationEndTime(new Date()); // Track when user leaves affirmation\n    setFlowState('post-stress');\n  };\n\n  const handlePostStressSubmit = async (rating: number) => {\n    // We already have the user from the AuthContext\n    if (!user) {\n      toast({\n        title: 'Error',\n        description: 'You must be logged in to save stress data.',\n        variant: 'destructive',\n      });\n      return;\n    }\n\n    if (stressData.pre === null || !affirmationType) {\n      toast({\n        title: 'Error',\n        description: 'Could not save your response due to missing pre-stress data or affirmation type.',\n        variant: 'destructive',\n      });\n      return;\n    }\n\n    // Validate time tracking data\n    if (!flowStartTime || !affirmationStartTime || !affirmationEndTime) {\n      toast({\n        title: 'Error',\n        description: 'Could not save your response due to missing time tracking data.',\n        variant: 'destructive',\n      });\n      return;\n    }\n\n    const flowEndTime = new Date();\n\n    // Calculate durations in seconds\n    const affirmationDurationSeconds = Math.round(\n      (affirmationEndTime.getTime() - affirmationStartTime.getTime()) / 1000\n    );\n    const totalFlowDurationSeconds = Math.round(\n      (flowEndTime.getTime() - flowStartTime.getTime()) / 1000\n    );\n\n    // This is the critical change: pass the user's UID as creatorId\n    const stressDataToSave = {\n      creatorId: user.uid,\n      affirmationType: affirmationType!,\n      affirmation: currentAffirmation,\n      stressBefore: stressData.pre,\n      stressAfter: rating,\n      timestamp: new Date().toISOString(),\n      // Time tracking data\n      flowStartTime: flowStartTime.toISOString(),\n      affirmationStartTime: affirmationStartTime.toISOString(),\n      affirmationEndTime: affirmationEndTime.toISOString(),\n      flowEndTime: flowEndTime.toISOString(),\n      affirmationDurationSeconds,\n      totalFlowDurationSeconds,\n    };\n\n    setStressData({ pre: stressData.pre, post: rating });\n\n    try {\n      const result = await saveStressData(stressDataToSave);\n      if (result.success) {\n        console.log(\"Stress data successfully saved!\");\n        toast({\n          title: 'Stress data saved!',\n          description: 'Your stress data has been successfully recorded.',\n        });\n        setFlowState('complete');\n      } else {\n        console.error(\"Error saving stress data:\", result.error);\n        toast({\n          title: 'Error',\n          description: `Could not save your response: ${result.error}`,\n          variant: 'destructive',\n        });\n      }\n    } catch (error) {\n      console.error(\"Error saving stress data:\", error);\n      toast({\n        title: 'Error',\n        description: 'An unexpected error occurred. Please try again.',\n        variant: 'destructive',\n      });\n    }\n  };\n\n  const resetFlow = () => {\n    setFlowState('idle');\n    setStressData({ pre: null, post: null });\n    setAffirmationType(null);\n    // Reset time tracking\n    setFlowStartTime(null);\n    setAffirmationStartTime(null);\n    setAffirmationEndTime(null);\n  };\n\n  if (loading || !user || !isClient) {\n    return (\n      <div className=\"flex h-full items-center justify-center bg-background\">\n        <div className=\"text-center\">\n          <div className=\"w-16 h-16 border-4 border-dashed rounded-full animate-spin border-primary-foreground mx-auto\"></div>\n          <p className=\"mt-4 text-muted-foreground\">Loading...</p>\n        </div>\n      </div>\n    );\n  }\n\n  const isEveningDisabled = currentHour === null || currentHour < 18;\n\n  return (\n    <div className=\"flex flex-col min-h-screen bg-background\">\n      <header className=\"p-4 flex justify-between items-center border-b\" style={{ paddingTop: 'max(1rem, var(--safe-area-inset-top))', paddingLeft: 'max(1rem, var(--safe-area-inset-left))', paddingRight: 'max(1rem, var(--safe-area-inset-right))' }}>\n        <h1 className=\"text-xl font-headline font-bold\">brain-kit.uk</h1>\n        <div className=\"flex items-center gap-2\">\n          {isAdmin && (\n            <Button variant=\"outline\" size=\"sm\" onClick={() => router.push('/admin')} className=\"gap-2\">\n              <Shield className=\"h-4 w-4\" />\n              Admin\n            </Button>\n          )}\n          <NotificationToggle />\n          <div className=\"text-right text-sm\">\n            <div>{user.email}</div>\n            <div className=\"text-xs text-muted-foreground\">Participant ID: {user.participantId}</div>\n          </div>\n          <Button variant=\"ghost\" size=\"icon\" onClick={() => { logout(); router.push('/login'); }}>\n            <LogOut className=\"h-4 w-4\" />\n            <span className=\"sr-only\">Log out</span>\n          </Button>\n        </div>\n      </header>\n      <main className=\"flex-grow flex items-center justify-center p-4\">\n        <div className=\"w-full max-w-md\">\n          {flowState === 'idle' && (\n            <>\n              <InstallPWASetup />\n              <NotificationSetup />\n              <Card className=\"shadow-lg\">\n              <CardHeader>\n                <CardTitle className=\"font-headline text-center\">Ready for your affirmation?</CardTitle>\n                <CardDescription className=\"text-center\">\n                  You would normally receive a notification for these.\n                </CardDescription>\n              </CardHeader>\n              <CardContent className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <Button size=\"lg\" onClick={() => handleStartFlow('morning')}>\n                  <Sunrise className=\"mr-2 h-5 w-5\" />\n                  Morning\n                </Button>\n                <TooltipProvider>\n                  <Tooltip>\n                    <TooltipTrigger asChild>\n                      <div className=\"w-full\">\n                        <Button\n                          size=\"lg\"\n                          onClick={() => handleStartFlow('evening')}\n                          disabled={isEveningDisabled}\n                          className=\"w-full\"\n                        >\n                          {isEveningDisabled ? <Lock className=\"mr-2 h-5 w-5\" /> : <Sunset className=\"mr-2 h-5 w-5\" />}\n                          Evening\n                        </Button>\n                      </div>\n                    </TooltipTrigger>\n                    {isEveningDisabled && (\n                      <TooltipContent>\n                        <p>Evening affirmation unlocks at 6 PM.</p>\n                      </TooltipContent>\n                    )}\n                  </Tooltip>\n                </TooltipProvider>\n              </CardContent>\n            </Card>\n            </>\n          )}\n\n          {flowState === 'pre-stress' && (\n            <StressRating\n              title=\"Before we begin, how are you feeling?\"\n              description=\"Rate your current stress level from 1 (very calm) to 5 (very stressed).\"\n              onSubmit={handlePreStressSubmit}\n            />\n          )}\n\n          {flowState === 'affirmation' && (\n            <AffirmationCard\n              affirmation={currentAffirmation}\n              onContinue={handleContinueFromAffirmation}\n            />\n          )}\n\n          {flowState === 'post-stress' && (\n            <StressRating\n              title=\"How are you feeling now?\"\n              description=\"Please rate your current stress level again.\"\n              onSubmit={handlePostStressSubmit}\n            />\n          )}\n\n          {flowState === 'complete' && (\n            <Card className=\"shadow-lg text-center\">\n              <CardHeader>\n                <CardTitle className=\"font-headline\">Thank you!</CardTitle>\n                <CardDescription>\n                  Your response has been recorded. Your participation is greatly appreciated.\n                </CardDescription>\n              </CardHeader>\n              <CardContent>\n                <Button onClick={resetFlow}>\n                  Back to Dashboard <ArrowRight className=\"ml-2 h-4 w-4\" />\n                </Button>\n              </CardContent>\n            </Card>\n          )}\n        </div>\n      </main>\n\n      {/* Floating install button - shows when not installed */}\n      <InstallPWAButtonFloating />\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}